let spaCore={spas:Object(),spa:Object(),init:async function(){this.events(),"list"==core.actionModel&&"spa"==core.model.toLowerCase()&&await spaCore.listadoDashboard()},events:function(){$("body").on(core.helper.clickEventType,".btnVerSpa",evt=>{evt.stopImmediatePropagation(),spaCore.verModalSpa($(evt.currentTarget).attr("data-id"),$(evt.currentTarget).attr("data-nombre"))}),$("body").on(core.helper.clickEventType,".btnEliminarSpa",evt=>{evt.stopImmediatePropagation(),spaCore.eliminar($(evt.currentTarget).attr("data-id"),$(evt.currentTarget).attr("data-nombre"))})},eliminar:function(id,nombre){core.Modelo.Delete("spa",id,nombre,"listadoSpa")},verModalSpa:async function(id){var infoComunidad;spaCore.getSpa(id).then(result=>{infoComunidad=result,apiFincatech.getView("modals","spa/modal_info").then(resultHTML=>{result=CoreUI.Utils.parse(resultHTML,spaCore.spa),CoreUI.Modal.GetHTML("modalInfoSpa",result,spaCore.spa.nombre)})})},renderTabla:async function(){if($("#listadoSpa").length){CoreUI.tableData.init(),CoreUI.tableData.addColumn("cif","CIF"),CoreUI.tableData.addColumn("nombre","NOMBRE"),CoreUI.tableData.addColumn("personacontacto","PERSONA DE CONTACTO"),CoreUI.tableData.addColumn("localidad","Localidad"),CoreUI.tableData.addColumn("provincia[0].Nombre","Provincia");var html='<a href="mailto:data:email$" class="pl-1 pr-1">data:email$</a>';CoreUI.tableData.addColumn(null,"EMAIL",html),CoreUI.tableData.addColumn("telefono","TELEFONO");var html="data:created$";CoreUI.tableData.addColumn(null,"Fecha alta",html);var html='<ul class="nav justify-content-center">';html+='<li class="nav-item"><a href="javascript:void(0);" class="btnVerSpa d-inline-block" data-id="data:id$" data-nombre="data:nombre$"><i data-feather="eye" class="text-info img-fluid"></i></a></li>',html+=`<li class="nav-item"><a href="${baseURL}spa/data:id$" class="btnEditarSpa d-inline-block" data-id="data:id$" data-nombre="data:nombre$"><i data-feather="edit" class="text-success img-fluid"></i></a></li>`,html+='<li class="nav-item"><a href="javascript:void(0);" class="btnEliminarSpa d-inline-block" data-id="data:id$" data-nombre="data:nombre$"><i data-feather="trash-2" class="text-danger img-fluid"></i></li></ul>',CoreUI.tableData.addColumn(null,"",html),CoreUI.tableData.render("listadoSpa","Spa","spa/list")}},listadoDashboard:async function(){await spaCore.getAll().then(async data=>{this.renderTabla()})},getSpa:async function(id){await apiFincatech.get("spa/"+id).then(data=>(result=JSON.parse(data),responseStatus=result.status,responseData=result.data,spaCore.spa=responseData.Spa[0],spaCore.spa))},getAll:async function(){await apiFincatech.get("spa/list").then(async data=>{result=JSON.parse(data),responseStatus=result.status,responseData=result.data,spaCore.spas=responseData.Spa,spaCore.spas.total=spaCore.spas.length})}};$(()=>{spaCore.init()});