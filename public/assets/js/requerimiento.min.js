let requerimientoCore={NotasInformativas:Object(),notainformativa:Object(),init:async function(){this.events(),$("#listadoRequerimiento").length?await requerimientoCore.renderTabla():(core.Files.init(),core.Files.Fichero.entidadId=core.modelId)},events:function(){$("body").on(core.helper.clickEventType,".btnEliminarRequerimiento",(a=>{a.stopImmediatePropagation(),requerimientoCore.Model.Delete($(a.currentTarget).attr("data-id"),$(a.currentTarget).attr("data-nombre"))}))},Model:{Delete:function(a,e){core.Modelo.Delete("requerimiento",a,e,"listadoRequerimiento","¿Desea eliminar el requerimiento seleccionado?")}},renderTabla:async function(){if($("#listadoRequerimiento").length){CoreUI.tableData.init();var a="data:created$";CoreUI.tableData.addColumn("listadoRequerimiento",null,"Fecha",a,"text-center","80px"),CoreUI.tableData.addColumn("listadoRequerimiento","nombre","NOMBRE",null,"text-justify"),CoreUI.tableData.addColumn("listadoRequerimiento","requerimientotipo[0].nombre","TIPO",null,"text-left"),CoreUI.tableData.addColumn("listadoRequerimiento",(function(a,e,t,n){return`<p class="text-center m-0">${"0"==a.sujetorevision||"null"==a.sujetorevision?"No":"Sí"}</p>`}),"Sujeto revisión",null,"text-center"),CoreUI.tableData.addColumn("listadoRequerimiento",(function(a,e,t,n){return`<p class="text-center m-0">${"0"==a.requieredescarga||"null"==a.requieredescarga?"No":"Sí"}</p>`}),"Requiere descarga previa",null,"text-center"),CoreUI.tableData.addColumn("listadoRequerimiento",(function(a,e,t,n){return`<p class="text-center m-0">${"0"==a.caduca||"null"==a.caduca?"No":"Sí"}</p>`}),"Caduca",null,"text-center");a='<a href="'+config.baseURL+'public/storage/data:ficheroscomunes.nombrestorage$" target="_blank"><i class="bi bi-cloud-arrow-down" style="font-size:24px;"></i></a>';CoreUI.tableData.addColumn("listadoRequerimiento",null,"Fichero",a,"text-center","120px");a="data:activado$";CoreUI.tableData.addColumn("listadoRequerimiento",null,"Activo",a,"text-center","100px"),CoreUI.tableData.addColumn("listadoRequerimiento",(function(a,e,t,n){return`\n                    <ul class="nav justify-content-center">\n                        <li class="nav-item">\n                            <a href="${config.baseURL}requerimiento/${a.id}" class="d-inline-block">\n                                <i data-feather="edit-2" class="text-success img-fluid text-success icono-accion" style="width:26px;height:26px;"></i>\n                            </a>\n                        </li>\n                        <li class="nav-item">\n                            <a href="javascript:void(0);" class="btnEliminarRequerimiento d-inline-block" data-id="${a.id}" data-nombre="${a.nombre}">\n                                <i data-feather="trash-2" class="text-danger img-fluid icono-accion" style="width:26px;height:26px;"></i>\n                            </a>\n                        </li>\n                    </ul>`}),"&nbsp;",null,"text-center","40px"),$("#listadoRequerimiento").addClass("no-clicable"),await CoreUI.tableData.render("listadoRequerimiento","Requerimiento","requerimiento/list")}},renderTablaDocumentacionContratosCesion:async function(){if($("#listadoDocumentacionContratosCesion").length){CoreUI.tableData.init(),CoreUI.tableData.columns=[];var a=`\n                        <a href="${config.baseURL}public/storage/data:ficheroscomunes.nombrestorage$" target="_blank">\n                            <p class="m-0 d-inline-flex">\n                                <i class="bi bi-cloud-arrow-down pr-2" style="font-size:26px;"></i> \n                                <span class="align-self-center">data:nombre$</span>\n                            </p>\n                        </a>`;CoreUI.tableData.addColumn("listadoDocumentacionContratosCesion",null,"Fichero",a,"text-left","120px"),$("#listadoDocumentacionContratosCesion").addClass("no-clicable"),await CoreUI.tableData.render("listadoDocumentacionContratosCesion","Requerimiento","rgpd/requerimiento/3/list",!1,!1,!1)}},renderTablaDocumentacionCamarasSeguridad:async function(){if($("#listadoDocumentacionCamarasSeguridad").length){CoreUI.tableData.init();var a='<a href="'+config.baseURL+'public/storage/data:ficheroscomunes.nombrestorage$" target="_blank"><i class="bi bi-cloud-arrow-down mr-2" style="font-size:24px;"></i>data:nombre$</a>';CoreUI.tableData.addColumn("listadoDocumentacionCamarasSeguridad",null,"Fichero",a,"text-left","120px"),$("#listadoDocumentacionCamarasSeguridad").addClass("no-clicable"),await CoreUI.tableData.render("listadoDocumentacionCamarasSeguridad","Requerimiento","rgpd/requerimiento/2/list",!1,!1,!1)}},renderTablaContratosCesion:async function(a){if($("#listadoContratosCesion").length){CoreUI.tableData.init(),CoreUI.tableData.columns=[],CoreUI.tableData.addColumn("listadoContratosCesion","titulo","Título",null,"text-left"),CoreUI.tableData.addColumn("listadoContratosCesion","descripcion","Comentarios",null,"text-justify"),CoreUI.tableData.addColumn("listadoContratosCesion","ficheroscomunes[0]","DOCUMENTO",null,"text-center",null,(function(a,e,t,n){var i="";return t.ficheroscomunes.length>0&&(i=`<a href="${baseURL}public/storage/${t.ficheroscomunes[0].nombrestorage}" class="mr-2" data-toggle="tooltip" data-placement="bottom" title="Ver documento" data-original-title="Ver documento" target="_blank">\n                                        <i class="bi bi-cloud-arrow-down text-success" style="font-size: 30px;"></i>\n                                    </a>`),`${i}\n                                  <a href="javascript:void(0);" class="btnAdjuntarDocumentoRGPD" data-tipo="contratoscesion" data-idrequerimiento="${t.id}">\n                                    <i class="bi bi-cloud-arrow-up text-danger" style="font-size: 30px;"></i>\n                                  </a>\n                                  `}));var e="data:created$";CoreUI.tableData.addColumn("listadoContratosCesion",null,"Fecha de subida",e);e='<ul class="nav justify-content-center accionesTabla">';e+='<li class="nav-item"><a href="javascript:void(0);" class="btnEliminarDocumentoRGPD d-inline-block" data-id="data:id$" data-tipo="contratoscesion" data-nombre="data:titulo$"><i data-feather="trash-2" class="text-danger img-fluid"></i></li></ul>',CoreUI.tableData.addColumn("listadoContratosCesion",null,"",e),$("#listadoCamarasSeguridad").addClass("no-clicable"),await CoreUI.tableData.render("listadoContratosCesion","ContratosCesion",`rgpd/documentacion/contratoscesion/${a}/list`,!1,!1,!1)}},renderTablaCamarasSeguridad:async function(a){if($("#listadoCamarasSeguridad").length){CoreUI.tableData.init(),CoreUI.tableData.columns=[],CoreUI.tableData.addColumn("listadoCamarasSeguridad","titulo","Título",null,"text-left"),CoreUI.tableData.addColumn("listadoCamarasSeguridad","descripcion","Comentarios",null,"text-justify"),CoreUI.tableData.addColumn("listadoCamarasSeguridad","ficheroscomunes[0]","SUBIR DOCUMENTO",null,"text-center",null,(function(a,e,t,n){var i="";return i+=`<a href="javascript:void(0);" class="btnAdjuntarDocumentoRGPD" data-tipo="camarasseguridad" data-idrequerimiento="${t.id}">\n                                    <i class="bi bi-cloud-arrow-up text-danger" style="font-size: 30px;"></i>\n                                  </a>`})),CoreUI.tableData.addColumn("listadoCamarasSeguridad","ficheroscomunes[0]","DOCUMENTO SUBIDO",null,"text-center",null,(function(a,e,t,n){var i="";return t.ficheroscomunes.length>0?i=`\n                        <a href="${baseURL}public/storage/${t.ficheroscomunes[0].nombrestorage}" class="mr-2" data-toggle="tooltip" data-placement="bottom" title="Ver documento" data-original-title="Ver documento" target="_blank">\n                            <i class="bi bi-file-earmark-arrow-down text-success" style="font-size: 26px;"></i>\n                        </a>`:i+='<span class="badge bg-danger">Pendiente subir</span>',i})),CoreUI.tableData.addColumn("listadoCamarasSeguridad","ficheroscomunes[0]","Fecha de subida",null,"text-center",null,(function(a,e,t,n){var i="";return t.updated?i+=`<span>${moment(t.updated).locale("es").format("DD/MM/YYYY HH:mm")}</span>`:i='\n                        <span class="m-0">-</span>',i}));'<li class="nav-item"><a href="javascript:void(0);" class="btnEliminarDocumentoRGPD d-inline-block" data-id="data:id$" data-tipo="camarasseguridad" data-nombre="data:titulo$"><i data-feather="trash-2" class="text-danger img-fluid"></i></li></ul>',CoreUI.tableData.addColumn("listadoCamarasSeguridad",null,"",'<ul class="nav justify-content-center accionesTabla"><li class="nav-item"><a href="javascript:void(0);" class="btnEliminarDocumentoRGPD d-inline-block" data-id="data:id$" data-tipo="camarasseguridad" data-nombre="data:titulo$"><i data-feather="trash-2" class="text-danger img-fluid"></i></li></ul>'),$("#listadoCamarasSeguridad").addClass("no-clicable"),CoreUI.tableData.render("listadoCamarasSeguridad","CamarasSeguridad",`rgpd/documentacion/camarasseguridad/${a}/list`,!1,!1,!1)}return!0},renderEtiquetaEstado:function(a){var e,t;switch(a.toLowerCase()){case"pv":t="Pendiente de verificación",e="info";break;case"ve":t="Verificado",e="success";break;case"re":t="Rechazado",e="danger";break;case"ca":t="Caducado",e="danger";break;case"ps":t="Pendiente de subir",e="warning";break;case"na":t="No adjuntado",e="danger";break;default:t="Pendiente",e="danger";break}return`<span class="badge rounded-pill bg-${e} pl-3 pr-3 pt-2 pb-2 d-block">${t}</span>`}};$((()=>{requerimientoCore.init()}));