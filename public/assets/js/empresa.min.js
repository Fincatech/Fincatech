let empresaCore={Empresa:Object(),empresa:Object(),init:async function(){this.events(),$("#listadoEmpresa").length&&empresaCore.renderTabla(),empresaCore.renderTablaEmpleados(core.modelId),$(".titulo-modulo").length&&CoreUI.Utils.setTituloPantalla("Empresa","razonsocial")},events:async function(){$("body").on(core.helper.clickEventType,".btnEliminarEmpresa",evt=>{evt.stopImmediatePropagation(),empresaCore.eliminar($(evt.currentTarget).attr("data-id"),$(evt.currentTarget).attr("data-nombre"))})},eliminar:function(id,nombre){core.Modelo.Delete("empresa",id,nombre,"listadoEmpresa"),Swal.fire({title:`¿Desea eliminar la empressa:<br>${nombre}?`,text:"Se va a eliminar la empresa y toda la información asociada",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(result=>{result.isConfirmed&&apiFincatech.delete("empresa",id).then(result=>{Swal.fire("Empresas eliminada correctamente","","success"),$("#listadoEmpresa").DataTable().ajax.reload()})})},renderTabla:async function(){if($("#listadoEmpresa").length){CoreUI.tableData.init(),CoreUI.tableData.addColumn("razonsocial","Nombre",null,"text-left"),CoreUI.tableData.addColumn("cif","CIF",null,"text-justify"),CoreUI.tableData.addColumn("email","EMAIL",null,"text-left"),CoreUI.tableData.addColumn("telefono","TELEFONO",null,"text-left"),CoreUI.tableData.addColumn("personacontacto","Persona de contacto",null,"text-left"),CoreUI.tableData.addColumn("localidad","Localidad",null,"text-left");var html='<ul class="nav justify-content-center accionesTabla">';html+=`<li class="nav-item"><a href="${baseURL}empresa/data:id$" class="btnEditarEmpresa d-inline-block" data-id="data:id$" data-nombre="data:razonsocial$"><i data-feather="edit" class="text-success img-fluid"></i></a></li>`,html+='<li class="nav-item"><a href="javascript:void(0);" class="btnEliminarEmpresa d-inline-block" data-id="data:id$" data-nombre="data:razonsocial$"><i data-feather="trash-2" class="text-danger img-fluid"></i></li></ul>',CoreUI.tableData.addColumn(null,"",html),CoreUI.tableData.render("listadoEmpresa","Empresa","empresa/list")}},renderTablaEmpleados:async function(idempresa){if($("#listadoEmpleadosEmpresa").length){CoreUI.tableData.init(),CoreUI.tableData.addColumn("nombre","Nombre",null,"text-left"),CoreUI.tableData.addColumn("numerodocumento","DNI/NIE",null,"text-left"),CoreUI.tableData.addColumn("razonsocial","Empresa",null,"text-left"),CoreUI.tableData.addColumn("puesto","Puesto",null,"text-left"),CoreUI.tableData.addColumn("email","EMAIL",null,"text-left"),CoreUI.tableData.addColumn("telefono","TELEFONO",null,"text-left"),CoreUI.tableData.addColumn("fechaalta","Fecha alta",null,"text-left"),CoreUI.tableData.addColumn("fechabaja","Fecha baja",null,"text-left");var html="data:estado$";CoreUI.tableData.addColumn(null,"Estado",html),CoreUI.tableData.render("listadoEmpleadosEmpresa","Empleados",`empresa/${idempresa}/empleados`,!1,!1,!1)}}};$(()=>{empresaCore.init()});