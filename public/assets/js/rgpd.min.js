let rgpdCore={Constantes:{CargaDocumentoEmpleadoRGPD:'\n        <div class="row">\n             <div class="col-12 text-center text-uppercase align-self-center">\n               <p class="m-0" style="display: block; font-size: 18px;"> Carga de documento</p>\n             </div>\n         </div>\n         <div class="row mb-2 wrapperInformacion">\n           <div class="col-12">\n               <p class="mt-3 text-justify" style="font-size: 14px;">1. Seleccione el fichero que desea adjuntar</p>\n               <p class="mt-3 text-justify" style="font-size: 14px;">2. Presione el botón <strong>Adjuntar documento</strong></p>\n           </div>\n         </div>\n         <div class="form-group row mb-2 justify-content-center wrapperSelectorFichero">\n           <div class="col-12">  \n               <div class="wrapperFichero row border rounded-lg ml-0 mr-0 mb-0 shadow-inset border-1 pt-3 pb-2">\n                   <div class="col-2 align-self-center h-100 text-center">\n                       <i class="bi bi-cloud-arrow-up text-info" style="font-size: 30px;"></i>\n                   </div>\n                   <div class="col-10 pl-0 align-self-center">\n                       <input accept=".pdf, .doc, .docx" class="form-control form-control-sm ficheroAdjuntar border-0" hs-fichero-entity="Documental" id="ficheroadjuntar" name="ficheroadjuntar" type="file">\n                   </div>       \n               </div>\n               <span class="pb-3 d-block text-center pt-2" style="font-size: 13px;">Sólo se permiten ficheros con extensión pdf, doc o docx</span>    \n               \n              <div class="row form-group wrapperTituloDocumento text-left">\n                <div class="col-12">\n                  <label>Nombre del empleado</label>\n                  <input type="text" class="form-control w-100 tituloDocumentoRGPD mt-2" id="tituloDocumentoRGPD" maxlength="40" name="tituloDocumentoRGPD">\n                </div>\n              </div>\n              <div class="row form-group wrapperObservaciones text-left mt-2 d-none">\n                <div class="col-12">\n                  <label>Descripción</label>\n                  <textarea class="form-control w-100 observacionesDocumentoRGPD shadow-inset border-0 mt-2" id="observacionesDocumentoRGPD" rows="3" name="observacionesDocumentoRGPD"></textarea>\n                </div>\n              </div>          \n               \x3c!-- Mensaje de error --\x3e \n               <div class="wrapperMensajeErrorCarga row text-light p-3" style="display: none; font-size: 14px;">\n                   <div class="col-12 bg-danger p-3 rounded shadow-neumorphic">\n                     <p class="mensaje"></p>\n                   </div>\n               </div>          \n     \n               \x3c!-- Botón de adjuntar documento --\x3e\n               <div class="row mt-3">\n                 <div class="col-12">\n                   <a href="javascript:void(0);" class="btn d-block btn-success bntUploadDocumentoEmpleadoRGPD pt-3 pb-3">Adjuntar documento</a>\n                 </div>\n               </div>\n           </div>\n         </div>\n         '},Init:function(){rgpdCore.Events(),$("body #listadoRGPDEmpleadosAdministracion").length>0&&rgpdCore.Render.renderTablaRGPDEmpleadosAdministrador()},Events:function(){$("body").on(core.helper.clickEventType,".enlaceRGPD",(function(e){$(".loading").show(),$(".tituloEmpresasComunidad").text("Empresas externas"),documentalCore.RGPD.cargarDocumentacionCamarasSeguridad().then(documentalCore.renderTablaDocumentacionBasica()),rgpdCore.comprobarContratoAdministracionComunidad(core.modelId),$(".loading").hide()})),$("body").on(core.helper.clickEventType,".enlaceRGPDDocumentacionBasica",(function(evt){documentalCore.RGPD.cargarDocumentacionCamarasSeguridad(),rgpdCore.comprobarContratoAdministracionComunidad(core.modelId)})),$("body").on(core.helper.clickEventType,".enlaceRGPDNotasInformativas",(function(evt){notasInformativasCore.renderTabla()})),$("body").on(core.helper.clickEventType,".enlaceRGPDInformeEvaluacionSeguimiento",(function(evt){informeValoracionSeguimientoCore.renderTabla()})),$("body").on(core.helper.clickEventType,".enlaceRGPDConsultasDPD",(function(evt){dpdCore.renderTabla()})),$("body").on(core.helper.clickEventType,".enlaceRGPDContratosCesionTerceros",(function(evt){requerimientoCore.renderTablaDocumentacionContratosCesion().then(()=>{requerimientoCore.renderTablaContratosCesion(core.modelId)})})),$("body").on(core.helper.clickEventType,".enlaceRGPDCamarasSeguridad",(function(evt){requerimientoCore.renderTablaCamarasSeguridad(core.modelId),$("#chkTieneCamarasSeguridad").prop("checked","1"==core.Modelo.entity.Comunidad[0].camarasseguridad?"checked":"")}))},comprobarContratoAdministracionComunidad:function(_idComunidad){_idComunidad&&void 0!==_idComunidad&&""!=_idComunidad&&apiFincatech.get(`rgpd/comunidad/${_idComunidad}/administrador/${core.Security.user}/contratoadministracion`).then(result=>{var datos=JSON.parse(result);if(datos.data){if(datos=datos.data,console.log(datos),$(".btnAdjuntarContrato").attr("data-idrelacionrequerimiento",datos.id),$(".tablaContratoAdministracion .estado").html(CoreUI.Utils.renderLabelByEstado(datos.estado)),"Verificado"==datos.estado||"Adjuntado"==datos.estado){var fechaSubida=moment(datos.created).locale("es").format("L"),htmlSubida=`\n                        <p class="mb-0 text-center"><a href="${baseURL}public/storage/${datos.nombrestorage}" class="text-success" download="${datos.nombre}"><i class="bi bi-file-earmark-arrow-down" style="font-size: 24px;"></i></a> </p>Subido el ${fechaSubida}`;$(".tablaContratoAdministracion .fechaSubida").html(htmlSubida)}}else;})},Render:{renderTablaRGPDEmpleadosAdministrador:function(){if($("#listadoRGPDEmpleadosAdministracion").length){CoreUI.tableData.init(),CoreUI.tableData.columns=[],CoreUI.tableData.addColumn("listadoRGPDEmpleadosAdministracion","titulo","Nombre del empleado",null,"text-left"),CoreUI.tableData.addColumn("listadoRGPDEmpleadosAdministracion","ficheroscomunes[0]","DOCUMENTO",null,"text-center",null,(function(data,type,row,meta){var salida;return`\n                                      <a href="javascript:void(0);" class="btnAdjuntarDocumentoEmpleadoRGPD" data-idrow="${meta.row}" data-tipo="rgpdempleado" data-idrequerimiento="${row.id}">\n                                        <i class="bi bi-cloud-arrow-up text-danger" style="font-size: 30px;"></i>\n                                      </a>\n                                      `})),CoreUI.tableData.addColumn("listadoRGPDEmpleadosAdministracion",(function(row,type,val,meta){var descarga="",fechaSubida=row.updated;return row.ficheroscomunes.length>0&&(descarga=`<a href="${baseURL}public/storage/${row.ficheroscomunes[0].nombrestorage}" download="${row.ficheroscomunes[0].nombre}" class="d-block" data-toggle="tooltip" data-placement="bottom" title="Ver documento" data-original-title="Ver documento" target="_blank">\n                                            <i class="bi bi-file-earmark-arrow-down text-success" style="font-size: 24px;"></i>\n                                        </a>`),row.ficheroscomunes.length?(row.updated?fecha=row.updated:fecha=row.created,`<p class="mb-0 text-center">${descarga} ${fechaSubida=`<span class="small">Subido el ${moment(fecha).locale("es").format("L")}</span>`}</p>`):'<span class="badge rounded-pill bg-danger pl-3 pr-3 pt-2 pb-2 d-block">No adjuntado</span>'}),"DOCUMENTO ADJUNTADO",null,"text-center");var html='<ul class="nav justify-content-center accionesTabla">';html+='<li class="nav-item"><a href="javascript:void(0);" class="btnEliminarDocumentoRGPD d-inline-block" data-id="data:id$" data-tipo="rgpdempleado" data-nombre="data:titulo$"><i data-feather="trash-2" class="text-danger img-fluid"></i></li></ul>',CoreUI.tableData.addColumn("listadoRGPDEmpleadosAdministracion",null,"",html),$("#listadoRGPDEmpleadosAdministracion").addClass("no-clicable"),CoreUI.tableData.render("listadoRGPDEmpleadosAdministracion","Rgpdempleado","rgpd/documentacion/rgpdempleado/1/list",!1,!1,!1)}}}};$(()=>{rgpdCore.Init()});