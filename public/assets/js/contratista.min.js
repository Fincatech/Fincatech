let contratista={idContratista:null,Init:function(){CoreUI.Sidebar.Comunidades.cargarMenuComunidades(),contratista.Events(),core.Files.init()},Events:async function(){$("body .btnSaveData").off(core.helper.clickEventType).on(core.helper.clickEventType,(function(evt){evt.stopImmediatePropagation(),core.Forms.Validate("form-empleado")?(core.Forms.prepareFormDataBeforeSend("form-empleado"),empleadoCore.Model.save()):CoreUI.Modal.Error("Debe rellenar la informaciÃ³n de todos los campos marcados como obligatorios","Error Alta Empleado")})),$("body #listadoDocumentacionEmpresa").length&&await core.Security.getUserInfo().then((function(){empresaCore.renderTablaRequerimientosEmpresa(core.Security.user)})),$("body #listadoEmpleadosContratista").length&&await core.Security.getUserInfo().then((function(){empresaCore.renderTablaEmpleadosContratista(core.Security.user,"listadoEmpleadosContratista")})),$("body #form-empleado").length&&core.Security.getUserInfo().then(async result=>{$("body #idempresa").val(core.Security.user);var actionForm=$("body #form-empleado").attr("data-action");$("body").attr("hs-action",actionForm),$("body").attr("hs-model","empleado"),core.model="empleado",core.Forms.initializeSelectData(),"get"==actionForm?($("body").attr("hs-model-id",$("body #form-empleado").attr("data-id")),empleadoCore.Model.get($("body #form-empleado").attr("data-id"),(function(){core.Forms.data=empleadoCore.Model.Empleado,core.modelId=empleadoCore.Model.id,$("body").attr("hs-model-id",empleadoCore.Model.id),core.Forms.mapDataFromModel("form-empleado",empleadoCore.Model.Empleado)}))):$("#fechaalta").val(moment().format("YYYY-MM-DD"))}),$("body #listadoEmpleadosContratista").length&&$("body").on(core.helper.clickEventType,"#listadoEmpleadosContratista tr",(function(evt){evt.stopImmediatePropagation();var idEmpleado=window.tablelistadoEmpleadosContratista.row($(this).attr("id")).data().idempleado;core.Files.Fichero.entidadId=idEmpleado,$("body .empleadoRequerimientosInfo").text("Requerimientos de "+window.tablelistadoEmpleadosContratista.row($(this).attr("id")).data().nombre),$("body .empleadoRequerimientosInfo").show(),$("body .wrapperDocumentacionEmpleado .mensajeInformacion").hide(),$("body #listadoDocumentacionEmpleado").removeClass("d-none"),empleadoCore.renderTablaDocumentacionEmpleado(idEmpleado,"listadoDocumentacionEmpleado"),$("body .btnAdjuntarFicheroDocumento").off(),$("body").on(core.helper.clickEventType,".btnAdjuntarFicheroDocumento",(async function(){documentalCore.idcomunidad=$(this).attr("data-idcomunidad"),documentalCore.idempresa=$(this).attr("data-idempresa"),documentalCore.idempleado=$(this).attr("data-idempleado"),documentalCore.idrequerimiento=$(this).attr("data-idrequerimiento"),documentalCore.idrelacionrequerimiento=$(this).attr("data-idrelacionrequerimiento"),documentalCore.entidad=$(this).attr("data-entidad");const{value:file}=await Swal.fire({title:"",html:Constantes.CargaDocumento,showCancelButton:!1,showConfirmButton:!1,showCloseButton:!0,didOpen:function(){core.Files.init()}})}))}))}};$(()=>{contratista.Init()});