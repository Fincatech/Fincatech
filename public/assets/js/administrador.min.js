let administradorCore={administradores:Object(),administrador:Object(),init:async function(){administradorCore.events(),"list"==core.actionModel&&"administrador"==core.model.toLowerCase()?await administradorCore.listadoDashboard():"administrador"==core.model.toLowerCase()&&"list"!=core.actionModel&&(core.model="Usuario")},events:function(){$("body").on(core.helper.clickEventType,".btnVerAdministrador",evt=>{evt.stopImmediatePropagation(),administradorCore.verModalAdministrador($(evt.currentTarget).attr("data-id"),$(evt.currentTarget).attr("data-nombre"))}),$("body").on(core.helper.clickEventType,".btnEliminarAdministrador",evt=>{evt.stopImmediatePropagation(),administradorCore.eliminar($(evt.currentTarget).attr("data-id"),$(evt.currentTarget).attr("data-nombre"))})},eliminar:function(id,nombre){core.Modelo.Delete("administrador",id,nombre,"listadoAdministrador")},verModalAdministrador:async function(idComunidad){var infoComunidad;administradorCore.getAdministrador(idComunidad).then(result=>{infoComunidad=result,apiFincatech.getView("modals","administradores/modal_info").then(resultHTML=>{result=CoreUI.Utils.parse(resultHTML,administradorCore.comunidad),console.log(result),CoreUI.Modal.GetHTML("modalInfoComunidad",result,administradorCore.comunidad.nombre)})})},renderTabla:async function(){if($("#listadoAdministrador").length){CoreUI.tableData.init(),CoreUI.tableData.addColumn("nombre","NOMBRE"),CoreUI.tableData.addColumn("cif","CIF");var html='<a href="mailto:data:emailcontacto$" class="pl-1 pr-1">data:emailcontacto$</a>';CoreUI.tableData.addColumn(null,"EMAIL",html),CoreUI.tableData.addColumn("telefono","TELEFONO");var html="";CoreUI.tableData.addColumn(null,"Comunidades",html);var html="data:estado$";CoreUI.tableData.addColumn(null,"Estado",html);var html="data:created$";CoreUI.tableData.addColumn(null,"Fecha de alta",html);var html='<ul class="nav justify-content-center">';html+='<li class="nav-item"><a href="javascript:void(0);" class="btnVerAdministrador d-inline-block" data-id="data:id$" data-nombre="data:nombre$"><i data-feather="eye" class="text-info img-fluid"></i></a></li>',html+=`<li class="nav-item"><a href="${baseURL}administrador/data:id$" class="btnEditarAdministrador d-inline-block" data-id="data:id$" data-nombre="data:nombre$"><i data-feather="edit" class="text-success img-fluid"></i></a></li>`,html+='<li class="nav-item"><a href="javascript:void(0);" class="btnEliminarAdministrador d-inline-block" data-id="data:id$" data-nombre="data:nombre$"><i data-feather="trash-2" class="text-danger img-fluid"></i></li></ul>',CoreUI.tableData.addColumn(null,"",html),CoreUI.tableData.render("listadoAdministrador","Usuario","administrador/list")}},listadoDashboard:async function(){await administradorCore.getAll().then(async data=>{this.renderTabla()})},getAdministrador:async function(comunidadId){await apiFincatech.get("administrador/"+comunidadId).then(data=>(result=JSON.parse(data),responseStatus=result.status,responseData=result.data,administradorCore.administrador=responseData.Usuario[0],administradorCore.administrador.password="",console.log(administradorCore.comunidad),administradorCore.comunidad))},getAll:async function(){await apiFincatech.get("administrador/list").then(async data=>{result=JSON.parse(data),responseStatus=result.status,responseData=result.data,administradorCore.administradores=responseData.Usuario})}};$(()=>{administradorCore.init()});