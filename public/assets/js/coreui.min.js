let CoreUI={init:function(){},Utils:{parse:function(valor,data){let inicioPatron="data[",finalPatron="]";var posInicial=0;for(posInicial=valor.indexOf("data[");posInicial>=0;){if(posInicial>=0&&(posFinal=valor.indexOf("]",posInicial+1),posFinal>0)){campo=valor.substring(posInicial+"data[".length,posFinal);var find="data["+campo+"]",re=new RegExp(find,"g");valor=valor.replace(find,data[`${campo}`])}posInicial=valor.indexOf("data[",posInicial+1)}return valor}},tableData:{_this:null,columns:[],init:function(){jQuery.extend(!0,jQuery.fn.dataTable.defaults,{language:{decimal:",",thousands:".",info:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoPostFix:"",infoFiltered:"(filtrado de un total de _MAX_ registros)",loadingRecords:"Cargando...",lengthMenu:"Mostrar _MENU_ registros",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},processing:"Procesando...",search:"Buscar:",searchPlaceholder:"Término de búsqueda",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{create:"Nuevo",edit:"Cambiar",remove:"Borrar",copy:"Copiar",csv:"fichero CSV",excel:"tabla Excel",pdf:"documento PDF",print:"Imprimir",colvis:"Visibilidad columnas",collection:"Colección",upload:"Seleccione fichero...."},select:{rows:{_:"%d filas seleccionadas",0:"clic fila para seleccionar",1:"una fila seleccionada"}}}})},extractFields:function(valor,datos){let inicioPatron="data:",finalPatron="$";var posInicial=0;for(posInicial=valor.indexOf("data:");posInicial>=0;){if(posInicial>=0&&(posFinal=valor.indexOf("$",posInicial+"data:".length+1),posFinal>0)){if(campo=valor.substring(posInicial+"data:".length,posFinal),campo.indexOf(".")>0)definicion=campo.split("."),valorCampo=datos[definicion[0]][0],valorCampo=valorCampo[definicion[1]];else switch(valorCampo=datos[campo],campo){case"created":valorCampo=moment(valorCampo).locale("es").format("L");break;case"estado":switch(valorCampo){case"H":valorCampo='<span class="badge rounded-pill bg-warning d-block pt-2 pb-2">Histórico</span>';break;case"A":valorCampo='<span class="badge rounded-pill bg-success d-block pt-2 pb-2">Alta</span>';break;case"B":valorCampo='<span class="badge rounded-pill bg-danger d-block pt-2 pb-2">Baja</span>'}}var find="data:"+campo+"$";valor=valor.replace(find,valorCampo)}posInicial=valor.indexOf("data:",posInicial+"data:".length+1)}return valor},addColumn:function(nombre,titulo,renderHTML){var columna={};columna=void 0!==renderHTML?{title:titulo,data:null,render:function(data,type,row,meta){return html=renderHTML,field="codigo",html=CoreUI.tableData.extractFields(html,data),feather.replace(),html}}:{data:nombre,render:null,title:titulo},this.columns.push(columna)},render:function(id,entity,endpoint,allColumns){CoreUI.tableData.init(),$(`#${id}`).DataTable({serverSide:!0,select:!0,retrieve:!0,paging:!0,ajax:{url:config.baseURLEndpoint+endpoint,dataSrc:"data."+entity},columns:this.columns,columnDefs:[{targets:this.columns.length-1,className:"p-0 text-center"}],drawCallback:function(settings){feather.replace()}})}},Modal:{GetHTML:function(id,html,titulo,texto){$("body ."+id).length&&$("body ."+id).remove(),$("body").append(html),feather.replace(),$("body ."+id).modal("show")},Success:function(texto){Swal.fire(`${texto}`,"","success")},Error:function(texto){Swal.fire(`${texto}`,"","error")}}};$(()=>{CoreUI.init});