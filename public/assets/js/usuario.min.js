let usuarioCore={usuarios:Object(),usuario:Object(),init:async function(){usuarioCore.events(),"list"==core.actionModel&&"usuario"==core.model.toLowerCase()&&await usuarioCore.listadoDashboard(),$(".titulo-modulo").length&&"Usuario"==core.model&&CoreUI.setTitulo("nombre")},events:function(){$("body").on(core.helper.clickEventType,".btnVerUsuario",evt=>{evt.stopImmediatePropagation(),usuarioCore.verModalAdministrador($(evt.currentTarget).attr("data-id"),$(evt.currentTarget).attr("data-nombre"))}),$("body").on(core.helper.clickEventType,".btnEliminarUsuario",evt=>{evt.stopImmediatePropagation(),usuarioCore.eliminar($(evt.currentTarget).attr("data-id"),$(evt.currentTarget).attr("data-nombre"))})},eliminar:function(id,nombre){core.Modelo.Delete("usuario",id,nombre,"listadoUsuario")},verModalAdministrador:async function(idComunidad){var infoComunidad;usuarioCore.getAdministrador(idComunidad).then(result=>{infoComunidad=result,apiFincatech.getView("modals","administradores/modal_info").then(resultHTML=>{result=CoreUI.Utils.parse(resultHTML,usuarioCore.comunidad),console.log(result),CoreUI.Modal.GetHTML("modalInfoComunidad",result,usuarioCore.comunidad.nombre)})})},renderTabla:async function(){if($("#listadoUsuario").length){CoreUI.tableData.init(),CoreUI.tableData.addColumn("listadoUsuario","nombre","NOMBRE");var html="data:rol.nombre$";CoreUI.tableData.addColumn("listadoUsuario",null,"ROL",html),CoreUI.tableData.addColumn("listadoUsuario","cif","CIF");var html='<a href="mailto:data:emailcontacto$" class="pl-1 pr-1">data:emailcontacto$</a>';CoreUI.tableData.addColumn("listadoUsuario",null,"EMAIL",html),CoreUI.tableData.addColumn("listadoUsuario","telefono","TELEFONO");var html="data:estado$";CoreUI.tableData.addColumn("listadoUsuario",null,"Estado",html);var html="data:created$";CoreUI.tableData.addColumn("listadoUsuario",null,"Fecha de alta",html);var html='<ul class="nav justify-content-center">';html+='<li class="nav-item"><a href="javascript:void(0);" class="btnVerUsuario d-inline-block" data-id="data:id$" data-nombre="data:nombre$"><i data-feather="eye" class="text-info img-fluid"></i></a></li>',html+=`<li class="nav-item"><a href="${baseURL}usuario/data:id$" class="btnEditarUsuario d-inline-block" data-id="data:id$" data-nombre="data:nombre$"><i data-feather="edit" class="text-success img-fluid"></i></a></li>`,html+='<li class="nav-item"><a href="javascript:void(0);" class="btnEliminarUsuario d-inline-block" data-id="data:id$" data-nombre="data:nombre$"><i data-feather="trash-2" class="text-danger img-fluid"></i></li></ul>',CoreUI.tableData.addColumn("listadoUsuario",null,"",html),CoreUI.tableData.render("listadoUsuario","Usuario","usuario/list")}},listadoDashboard:async function(){await usuarioCore.getAll().then(async data=>{this.renderTabla()})},getAdministrador:async function(comunidadId){await apiFincatech.get("usuario/"+comunidadId).then(data=>(result=JSON.parse(data),responseStatus=result.status,responseData=result.data,usuarioCore.comunidad=responseData.Comunidad[0],console.log(usuarioCore.comunidad),usuarioCore.comunidad))},getAll:async function(){await apiFincatech.get("usuario/list").then(async data=>{result=JSON.parse(data),responseStatus=result.status,responseData=result.data,usuarioCore.usuarios=responseData.Usuario})}};$(()=>{usuarioCore.init()});