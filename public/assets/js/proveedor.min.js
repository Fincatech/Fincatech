let Proveedor={comunidadesAfectadas:0,empresaId:-1,empresaNuevaId:-1,Init:function(){CoreUI.Controller.InitializeSelectData(),Proveedor.Events()},Events:function(){$("body").on("change","#proveedorAntiguoId",(function(e){let o=$(this).val();Proveedor.empresaId=o,Proveedor.Controller.LoadComunidadesProveedor()})),$("body").on("change","#proveedorNuevoId",(function(e){let o=$(this).val();Proveedor.empresaNuevaId=o})),$("body").on(core.helper.clickEventType,".btnReasignarProveedor",(function(){Proveedor.Controller.ReasignarProveedor()}))},Controller:{ReasignarProveedor:function(){if(Proveedor.empresaId<=0||Proveedor.empresaNuevaId<=0)CoreUI.Modal.Error("Debe seleccionar el proveedor actual y el proveedor al que desea reasignar las comunidades");else if(Proveedor.empresaId!=Proveedor.empresaNuevaId)if(0!=window.tablelistadoComunidadesProveedor.data().length){var e=`<p class="mb-4">¿Desea continuar con el proceso de reasignación?</p>\n            <p class="mb-2">\n                <span class="font-weight-bold">Proveedor actual</span><br>\n                ${$("#proveedorAntiguoId option:selected").text()}\n            </p>\n            <p class="mb-4">\n            <span class="font-weight-bold">Proveedor de destino</span><br>\n                ${$("#proveedorNuevoId option:selected").text()}\n            </p>\n            <p class="text-danger"><span class="font-weight-bold">Atención</span>: Este cambio es irreversible.</p>`;CoreUI.Modal.Question(e,"Reasignación de proveedor","Reasignar proveedor",(function(){var e=Object();e={empresaId:Proveedor.empresaId,empresaNuevaId:Proveedor.empresaNuevaId},apiFincatech.post(`empresa/${Proveedor.empresaId}/reasignar/${Proveedor.empresaNuevaId}`,e).then((e=>{CoreUI.Modal.Success("El proceso ha finalizado"),Proveedor.Controller.LoadComunidadesProveedor()}))}))}else CoreUI.Modal.Error("El proveedor seleccionado no tiene asignada actualmente ninguna comunidad");else CoreUI.Modal.Error("El proveedor actual y el proveedor de destino es el mismo")},LoadComunidadesProveedor:function(){Proveedor.View.RenderTableComunidadesProveedor()}},Model:{},View:{RenderTableComunidadesProveedor:function(){$("#listadoComunidadesProveedor").length&&(void 0!==window.listadoComunidadesProveedor&&(CoreUI.tableData.columns.listadoComunidadesProveedor=[]),CoreUI.tableData.init(),CoreUI.tableData.addColumn("listadoComunidadesProveedor",(function(e,o,r,d){return`${e.codigo}`}),"Código",null,"text-left"),CoreUI.tableData.addColumn("listadoComunidadesProveedor",(function(e,o,r,d){return`${e.nombre}`}),"Comunidad",null,"text-left"),CoreUI.tableData.addColumn("listadoComunidadesProveedor",(function(e,o,r,d){return`${e.direccion}`}),"Dirección",null,"text-left"),CoreUI.tableData.addColumn("listadoComunidadesProveedor",(function(e,o,r,d){return`${e.provincia}`}),"Provincia",null,"text-left"),CoreUI.tableData.addColumn("listadoComunidadesProveedor",(function(e,o,r,d){return`${e.administrador}`}),"Administrador",null,"text-left"),$("#listadoComunidadesProveedor").addClass("no-clicable"),CoreUI.tableData.render("listadoComunidadesProveedor","Comunidades",`empresa/${Proveedor.empresaId}/comunidadesasignadas`,null,!1,!1,null,null,!1,null,!0))}}};$((()=>{"Proveedor"==core.model&&Proveedor.Init()}));