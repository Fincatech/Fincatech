let documentalCore={NotasInformativas:Object(),notainformativa:Object(),idrequerimiento:null,idcomunidad:null,idempleado:null,idempresa:null,entidad:null,init:async function(){$("#listadoNotasinformativas").length?notasInformativasCore.renderTabla():(core.Files.init(),core.Files.Fichero.entidadId=core.modelId),$("#listadoDocumentacionBasica").length&&documentalCore.renderTablaDocumentacionBasica(),documentalCore.Events(),core.Files.init()},Events:function(){$("body .bntUploadDocumento").off(),$("body").on(core.helper.clickEventType,".bntUploadDocumento",(function(e){e.preventDefault(),documentalCore.uploadRequerimiento()})),$("body").on(core.helper.clickEventType,".btnAdjuntarFicheroDocumento",(async function(){console.log("idcomunidad: "+$(this).attr("data-idcomunidad")),console.log("idempresa = "+$(this).attr("data-idempresa")),console.log(".idempleado = "+$(this).attr("data-idempleado")),console.log(".idrequerimiento = "+$(this).attr("data-idrequerimiento")),console.log(".idrelacionrequerimiento = "+$(this).attr("data-idrelacionrequerimiento")),console.log(".entidad = "+$(this).attr("data-entidad")),documentalCore.idcomunidad=$(this).attr("data-idcomunidad"),documentalCore.idempresa=$(this).attr("data-idempresa"),documentalCore.idempleado=$(this).attr("data-idempleado"),documentalCore.idrequerimiento=$(this).attr("data-idrequerimiento"),documentalCore.idrelacionrequerimiento=$(this).attr("data-idrelacionrequerimiento"),documentalCore.entidad=$(this).attr("data-entidad"),console.log("documentalCore.idcomunidad "+documentalCore.idcomunidad),console.log("documentalCore.idempresa : "+documentalCore.idempresa),console.log("documentalCore.idempleado  "+documentalCore.idempleado),console.log("documentalCore.idrequerimiento  "+documentalCore.idrequerimiento),console.log("documentalCore.idrelacionrequerimiento  "+documentalCore.idrelacionrequerimiento),console.log("documentalCore.entidad "+documentalCore.entidad);const{value:file}=await Swal.fire({title:"",html:Constantes.CargaDocumento,showCancelButton:!1,showConfirmButton:!1,showCloseButton:!0,didOpen:function(e){core.Files.init()}})}))},uploadRequerimiento:async function(){var data=Object();data={idcomunidad:documentalCore.idcomunidad,idempresa:documentalCore.idempresa,idempleado:documentalCore.idempleado,idrequerimiento:documentalCore.idrequerimiento,idrelacionrequerimiento:documentalCore.idrelacionrequerimiento,entidad:documentalCore.entidad,fichero:core.Files.fichero},await apiFincatech.post(`requerimiento/${documentalCore.entidad}/${documentalCore.idrequerimiento}`,data).then(async response=>{var responseData=JSON.parse(response);"ok"==responseData.status.response?(CoreUI.Modal.Success("El documento se ha registrado correctamente"),empresaCore.renderTabla()):Modal.Error("No se ha podido registrar el documento por el siguiente motivo:<br><br>"+responseData.status.response)})},COMUNIDAD:{},CAE:{verModalAdjuntarFichero:async function(idtiporequerimiento,idempresa){}},PRL:{verModalAdjuntarFichero:async function(){}},renderTablaDocumentacionBasica:async function(){if($("#listadoDocumentacionBasica").length){CoreUI.tableData.init(),CoreUI.tableData.addColumn("listadoDocumentacionBasica","nombre","Nombre documento",null,"text-justify");var html='<a href="'+config.baseURL+'public/storage/data:ficheroscomunes.nombrestorage$" target="_blank"><i class="bi bi-cloud-arrow-down" style="font-size:24px;"></i></a>';CoreUI.tableData.addColumn("listadoDocumentacionBasica",null,"Fichero",html,"text-center"),$("#listadoDocumentacionBasica").addClass("no-clicable"),CoreUI.tableData.render("listadoDocumentacionBasica","Requerimiento","rgpd/documentacionbasica")}},renderTabla:async function(){if($("#listadoNotasinformativas").length){CoreUI.tableData.init();var html="data:created$";CoreUI.tableData.addColumn("listadoNotasinformativas",null,"Fecha",html,"text-center"),CoreUI.tableData.addColumn("listadoNotasinformativas","titulo","TITULO",null,"text-justify"),CoreUI.tableData.addColumn("listadoNotasinformativas","descripcion","NOTA",null,"text-justify");var html='<a href="'+config.baseURL+'public/storage/data:ficheroscomunes.nombrestorage$" target="_blank"><i class="bi bi-cloud-arrow-down" style="font-size:24px;"></i></a>';CoreUI.tableData.addColumn("listadoNotasinformativas",null,"Fichero",html,"text-center"),CoreUI.tableData.render("listadoNotasinformativas","Notasinformativas","notasinformativas/list")}},renderTablaDocumentacionComunidad:async function(id){if($("#listadoDocumentacionComunidad").length){CoreUI.tableData.init(),CoreUI.tableData.addColumn("listadoDocumentacionComunidad","requerimiento","Documento",null,"text-justify","80%"),CoreUI.tableData.addColumn("listadoDocumentacionComunidad",(function(row,type,val,meta){return row.storagefichero,row.requerimiento}),"Documento",null,"text-center");var html='<a href="'+config.baseURL+'public/storage/data:storagefichero$" target="_blank"><i class="bi bi-cloud-arrow-down" style="font-size:24px;"></i></a>';CoreUI.tableData.addColumn("listadoDocumentacionComunidad",null,"Fichero",html,"text-center"),$("#listadoDocumentacionComunidad").addClass("no-clicable"),CoreUI.tableData.render("listadoDocumentacionComunidad","documentacioncomunidad",`comunidad/${id}/documentacioncomunidad`)}}};$(()=>{documentalCore.init()});